{% extends 'base.html.twig' %}

{% block title %}{{ article.title }}{% endblock %}

{% block body %}
<div class="leftcolumn">
    <h2>{{ article.title }} </h2>
    {% if article.users == app.user %}
        <a class="link" href="{{ path('users_articles_edit', {'slug': article.slug}) }}">Modifier</a>
    {% endif %}
    <div class="articleMeta">
        <p>
            {% if article.modifiedAt is not null %}
            <icon class="fa fa-calendar"></icon> Modifié le {{ article.modifiedAt ? article.modifiedAt|date('d/m/Y à H:i:s') : '' }}
            {% else %}
            <icon class="fa fa-calendar"></icon> Publié le {{ article.createdAt ? article.createdAt|date('d/m/Y') : '' }}
            {% endif %}
        </p>
        <a href="#">
            <icon class="fa fa-user"></icon> 
            {{ article.users.pseudo }}
        </a>
        <div>
            {{ article.likes }} <icon class="fa fa-thumbs-o-up"></icon>
        </div> 
        <div>
            {{ article.dislikes }} <icon class="fa fa-thumbs-o-down"></icon></div>
        </div>
        {{ include('/partials/_socialBar.html.twig')}}
        <div>{{ article.content|raw }}</div>

    <a class="link" href="{{ path('app_articles_accueil') }}">Retour</a>
</div>

<div class="rightcolumn">
    <h2>Derniers articles</h2>
    <a class="link" href="{{ path('app_articles_accueil') }}">Retour</a>
    {% for category in categories %}
        {% for article in category.articles %}
            <a class="link" href="{{ path('app_articles_show', {'slug': article.slug}) }}">
                <div style="background-image: url({{article.thumb}});">
                    <h3><b>{{ article.title }}</b></h3> 
                    <div>
                        {{ article.content | u.truncate(100,' ... ',false) | raw}}
                        <p>{{ article.likes }} <icon class="fa fa-thumbs-o-up"></icon></p>
                        <p>{{ article.dislikes }} <icon class="fa fa-thumbs-o-down"></icon></p>
                    </div>
                </div>
            </a>
        {% endfor %}
    {% endfor %}
</div>
{% endblock %}
