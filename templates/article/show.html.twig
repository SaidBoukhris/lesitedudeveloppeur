{% extends 'base.html.twig' %}

{% block title %}{{ article.title }}{% endblock %}

{% block body %}
<div class="leftcolumn">
    <h2>{{ article.title }} </h2>
    <div class="accueil">
        {% if article.users == app.user %}
            <a href="{{ path('users_articles_edit', {'slug': article.slug}) }}">Modifier</a>
        {% else %}

        {% endif %}
        
        <div class="page_articles_show_infos">
            <div class="page_articles_show_infos_date">
                <div>
                    {% if article.modifiedAt is not null %}
                    <icon class="fa fa-calendar"></icon> Modifié le {{ article.modifiedAt ? article.modifiedAt|date('d/m/Y à H:i:s') : '' }}
                    {% else %}
                        Publié le {{ article.createdAt ? article.createdAt|date('d/m/Y') : '' }}
                    {% endif %}
                </div>
                <a href="#">
                    <icon class="fa fa-user"></icon> 
                    {{ article.users.pseudo }}
                </a>
            </div>
            <div class="page_articles_show_infos_like">
                <div>{{ article.likes }} <icon class="fa fa-thumbs-o-up"></icon></div> 
                <div>{{ article.dislikes }} <icon class="fa fa-thumbs-o-down"></icon></div>
            </div>
            
        </div>
            <div class="page_articles_show_infos_social">
                {{ include('/partials/_socialBar.html.twig')}}
            </div>
        <p>{{ article.content|raw }}</p>

        <a class="link" href="{{ path('app_articles_accueil') }}">Retour</a>
    </div>
</div>

<div class="rightcolumn">
    <h2>Derniers articles</h2>
        {% if article.users == app.user %}
            <a class="link" href="{{ path('users_articles_edit', {'slug': article.slug}) }}">Modifier</a>
        {% endif %}
        <a class="link" href="{{ path('app_articles_accueil') }}">Retour</a>
        {% for category in categories %}
        {% for article in category.articles %}
            <a class="link" href="{{ path('app_articles_show', {'slug': article.slug}) }}">
                        <div class="page_les_articles_aside_cards_card_img" style="background-image: url({{article.thumb}});">
                        <h6 class="page_les_articles_aside_cards_card_title"><b>{{ article.title }}</b></h6> 
                        <p>{{ article.content | u.truncate(100,' ... ',false) | raw}}</p>
                        <p>{{ article.likes }} <icon class="fa fa-thumbs-o-up"></icon> | {{ article.dislikes }} <icon class="fa fa-thumbs-o-down"></icon></p>
                </div>
            </a>
        {% endfor %}
        {% endfor %}
</div>
{% endblock %}
